# NCF 桌面应用程序 - GUI 版本

## 🖥️ 概述

NCF桌面应用程序的图形用户界面（GUI）版本，提供直观、易用的界面来管理NeuChar Framework站点的下载、部署和运行。

## ✨ 特性

### 🎨 **现代化界面**
- 基于 Avalonia UI 框架，支持 Windows、macOS、Linux
- 响应式设计，支持窗口缩放
- 卡片式布局，信息层次清晰
- 现代化的色彩和字体设计

### 📊 **实时状态监控**
- **运行平台信息**：自动检测当前操作系统和架构
- **版本信息**：显示最新可用版本和当前安装版本
- **运行状态**：实时显示应用程序当前状态
- **站点地址**：显示NCF站点的访问地址

### 📈 **操作进度可视化**
- **进度条**：显示下载和安装进度
- **详细日志**：实时显示操作日志
- **状态提示**：清晰的状态颜色指示

### ⚙️ **灵活配置选项**
- **自动打开浏览器**：NCF启动后自动打开浏览器
- **自动清理下载文件**：可选择是否自动删除下载的ZIP文件
- **详细信息显示**：控制日志的详细程度
- **系统托盘最小化**：支持最小化到系统托盘
- **端口范围配置**：自定义端口扫描范围

### 🔄 **智能操作管理**
- **一键启动/停止**：简单的操作界面
- **连接测试**：测试网络连接和GitHub API可用性
- **配置目录访问**：快速打开应用程序配置目录
- **操作取消**：支持取消正在进行的操作

## 🚀 **使用方法**

### 启动应用程序
```bash
cd tools/NcfDesktopApp.GUI
dotnet run
```

### 基本操作流程

1. **启动应用程序**
   - 应用程序会自动检测平台信息
   - 获取最新版本信息

2. **配置选项**（可选）
   - 在"配置选项"卡片中调整设置
   - 设置端口范围、浏览器选项等

3. **启动NCF**
   - 点击"启动 NCF"按钮
   - 应用程序会自动：
     - 下载最新版本（如需要）
     - 提取文件（如需要）
     - 查找可用端口
     - 启动NCF站点
     - 等待站点就绪

4. **访问站点**
   - 站点启动成功后，会显示访问地址
   - 如果启用了自动打开浏览器，会自动打开站点

5. **停止NCF**
   - 点击"停止 NCF"按钮停止站点

### 辅助功能

- **测试连接**：验证网络连接和GitHub API可用性
- **打开配置目录**：快速访问应用程序数据目录
- **操作日志**：查看详细的操作过程

## 🎨 **界面预览**

### 主界面布局
```
┌─────────────────────────────────────────┐
│              NCF 桌面应用程序              │
│        自动下载并运行最新的 NCF 站点        │
├─────────────────────────────────────────┤
│  状态信息                                │
│  ┌─────────────────────────────────────┐ │
│  │ 运行平台: macOS ARM64               │ │
│  │ 最新版本: v0.30.3-build9245        │ │
│  │ 当前状态: 运行中                    │ │
│  │ 站点地址: http://localhost:5001     │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  操作进度                                │
│  ┌─────────────────────────────────────┐ │
│  │ NCF 运行中                          │ │
│  │ ████████████████████████████████    │ │
│  │                                     │ │
│  │ 操作日志:                           │ │
│  │ ┌─────────────────────────────────┐ │ │
│  │ │ [10:30:15] ✅ NCF 启动成功      │ │ │
│  │ │ [10:30:12] 🌐 站点已启动       │ │ │
│  │ └─────────────────────────────────┘ │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  配置选项                                │
│  ┌─────────────────────────────────────┐ │
│  │ ☑ 自动打开浏览器                    │ │
│  │ ☐ 自动清理下载文件                  │ │
│  │ ☑ 检查更新时显示详细信息            │ │
│  │ ☐ 最小化到系统托盘                  │ │
│  │                                     │ │
│  │ 端口范围: [5001] 到 [5300]         │ │
│  └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│        [测试连接] [打开配置目录] [停止 NCF] │
└─────────────────────────────────────────┘
```

## 🔧 **技术架构**

### 前端框架
- **Avalonia UI 11.3.2**：跨平台UI框架
- **CommunityToolkit.Mvvm**：MVVM模式支持

### 核心服务
- **NcfService**：核心业务逻辑服务
- **GitHub API集成**：自动获取最新版本
- **跨平台文件管理**：智能路径处理
- **端口管理**：自动端口检测和分配

### 数据绑定
- **ObservableProperty**：自动属性通知
- **AsyncRelayCommand**：异步命令支持
- **双向绑定**：配置选项自动保存

## 🌍 **跨平台支持**

| 平台 | 状态 | 特殊功能 |
|------|------|----------|
| **Windows** | ✅ 完全支持 | Shell集成、注册表支持 |
| **macOS** | ✅ 完全支持 | Dock集成、通知中心 |
| **Linux** | ✅ 完全支持 | 桌面环境集成 |

## 📋 **系统要求**

- **.NET 8.0 Runtime**
- **操作系统**：Windows 10+、macOS 10.15+、Linux（现代发行版）
- **内存**：至少 512MB 可用内存
- **磁盘空间**：至少 1GB 可用空间（用于NCF文件）
- **网络连接**：用于下载NCF包

## 🔧 **开发和构建**

### 开发环境
```bash
# 安装依赖
dotnet restore

# 运行开发版本
dotnet run

# 构建Release版本
dotnet build -c Release
```

### 平台特定发布
```bash
# Windows
dotnet publish -c Release -r win-x64 --self-contained true

# macOS
dotnet publish -c Release -r osx-x64 --self-contained true
dotnet publish -c Release -r osx-arm64 --self-contained true

# Linux
dotnet publish -c Release -r linux-x64 --self-contained true
```

## 🐛 **故障排除**

### 常见问题

1. **应用程序无法启动**
   - 确保安装了.NET 8.0 Runtime
   - 检查系统兼容性

2. **无法获取版本信息**
   - 检查网络连接
   - 验证GitHub API访问

3. **NCF站点启动失败**
   - 检查端口是否被占用
   - 确保有足够的系统权限

4. **界面显示异常**
   - 更新显卡驱动
   - 检查系统DPI设置

### 日志和诊断
- 应用程序日志保存在配置目录中
- 使用"测试连接"功能诊断网络问题
- 查看实时日志输出了解详细状态

## 📝 **更新日志**

### v1.0.0
- ✨ 初始GUI版本发布
- 🎨 现代化界面设计
- 🔄 完整的NCF生命周期管理
- ⚙️ 灵活的配置选项
- 🌍 跨平台支持

---

## 📞 **支持和反馈**

如果您遇到问题或有改进建议，请：

1. 查看日志获取详细错误信息
2. 使用"测试连接"功能诊断问题
3. 在GitHub Issues中报告问题
4. 提供完整的系统信息和错误日志

**享受更便捷的NCF开发体验！** 🚀 